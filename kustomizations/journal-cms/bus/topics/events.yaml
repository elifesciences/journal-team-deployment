---
apiVersion: sns.services.k8s.aws/v1alpha1
kind: Topic
metadata:
  name: bus-events
spec:
  name: bus-events--${env}
  tags:
    - key: Project
      value: journal
---
apiVersion: services.k8s.aws/v1alpha1
kind: FieldExport
metadata:
  name: bus-events-topic-arn
spec:
  to:
    name: journal-cms-bus-config
    kind: configmap
    key: bus_events_topic_arn
  from:
    path: ".status.ackResourceMetadata.arn"
    resource:
      group: sns.services.k8s.aws
      kind: Topic
      name: bus-events
---
apiVersion: services.k8s.aws/v1alpha1
kind: FieldExport
metadata:
  name: bus-events-topic-name
spec:
  to:
    name: journal-cms-bus-config
    kind: configmap
    key: bus_events_topic_name
  from:
    path: ".spec.name"
    resource:
      group: sns.services.k8s.aws
      kind: Topic
      name: bus-events
